# 커넥트

데이터 파이프라인 생성 시 반복 작업을 줄이고 효율적인 전송을 이루기 위한 애플리케이션이다. 커넥트는 특정한 작업 형태를 '템플릿' 형태로 만들어 놓은 커넥터를 실행함으로써 반복 작업을 줄일 수 있다.



### 커넥트 내부구조

사용자가 커넥트에 커넥터 생성 명령을 내리면 커넥트는 내부에 커넥터와 태스크를 생성한다. 커넥터는 태스크를 관리하고 태스크는 커넥터에 종속된 개념으로 실질적인 데이터 처리를 담당한다.&#x20;



### 커넥트 종류

단일 모드 커넥트와 분산 모드 커넥트로 구분하여 실행할 수 있다. REST API 를 통해 실행이 가능하며 현재 실행 중인 커넥트의 커넥터 플러그인 종류, 태스크 상태, 커넥터 상태 등을 확인할 수 있다.D

#### 단일모드 커넥트

1개의 프로세스로 실행되며 고가용성 구성이 되지 않는다.&#x20;



#### 분산모드 커넥트

2개 이상의 프로세스(클러스터?)가 1개의 그룹으로 묶여서 운영된다. 이를 통해 1개의 커넥트 프로세스에 이슈가 발생하여 종료되더라도 다른 커넥트 프로세스에 의해 파이프라인을 지속적으로 운영할 수 있는 장점이 있다. \
\
분산모드 커넥트를 실행할 때 환경파일에서 토픽 정보를 설정을 하게된다. 이는 모든 커넥트 프로세스에 장애가 발생하더라도  실행  정보는 토픽이 있는 서버에 저장되어 있기 때문에 다시 실행하더라도 파이프라인을 정상적으로 운영할 수 있는 장점이 있다.



### 커스텀 커넥터

#### 커스텀 소스 커넥터

카프카 커넥트 라이브러리( org.papache.kafka:connect-api)에서 제공하는 SourceConnector와 SourceTask 클래스를 이용하여 직접소스 커넥터를 구현할 수  있다. 직접 구현한 소스 커넥터를 빌드하여 jar 파일을 플러그인으로 추가하여 사용이 가능하다.&#x20;

* SourceConnector - 태스크를 실행하기 전 커넥터 설정 파일을 초기화하는 역할을 함
* SourceTask - 소스 파일로부터 데이터를 가져와서 토픽으로 데이터를 보내는 역할을 한다. <mark style="background-color:green;">**SourceTask는   토픽에서 사용하는 오프셋이 아니라 자체적으로 사용하는 오프셋을 사용한다. 이는 소스 데이터를 어디까지 가져왔는지 확인하여 중복해서 토픽으로 보내는 것을 방지하는 역할을 한다.**</mark>



#### 커스텀 싱크 커넥터

싱크 커넥터는 토픽의 데이터를 타깃 애플리케이션 또는 타깃 파일로 저장하는 역할을 한다. SinkConnector와 SinkTask 클래스를 사용하여 직접 싱크 커넥터를 구현할 수 있다.



